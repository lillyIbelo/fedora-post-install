---

- name: Install lightdm packages
  dnf: name={{ item }} state=installed
  with_items:
   - lightdm
   - lightdm-kde
   - light-locker

- name: Disable sddm (fedora 22 default)
  service: name=sddm enabled=no

- name: Enable lightdm
  service: name=lightdm enabled=yes
  register: enable_lightdm

- name: Etckeeper commit
  command: etckeeper commit "enable lightdm"
  when: etckeeper_enabled == true and enable_lightdm.changed

- name: Stop sddm
  service: name=sddm state=stopped

# may fail, so commenting this out
#- name: Start lightdm
#  service: name=lightdm state=started
